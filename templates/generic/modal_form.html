{% load socialaccount %}

<div class="modal fade login" id="loginModal">
    <div class="modal-dialog login animated">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            </div>
            <div class="modal-body">
                <div class="box">
                    <div class="content">
                        <div class="social">
                            <a style="font-size: 20px;" href="{% provider_login_url 'vk' method='oauth2' %}">Войти через VK</a>
                        </div>

                        <div class="row justify-content-center loginBox" style="margin-top:20px">
                          <br><br>
                            <form action="{% url 'rest_login' %}" class="form-validate logg">
                                {% csrf_token %}
                                    <div class="form-group" style="">
                                        <input
                                            type="text"
                                            name="username"
                                            id="username1"
                                            class="form-control validate-username required invalid"
                                            placeholder="Логин">
                                    </div>
                                    <div class="form-group" style="">
                                        <input
                                            type="password"
                                            name="password"
                                            id="password"
                                            class="form-control validate-username required invalid"
                                            placeholder="Пароль">
                                    </div>
                                <div class="form-group" style="text-align:center">
                                    <div class="submit-area padding-onlytop-sm">
                                        <button id="login_submit" type="submit" class="btn btn-primary btn-lg btn-block">Войти</button>
                                    </div>
                                </div>
                                <div id="api-response-login"></div>
                            </form>

                        </div>
                    </div>
                </div>
                <div class="box">
                    <div class="row justify-content-center registerBox" style="display:none;margin-top:20px">
                      <br><br><br>
                        <form action="{% url 'rest_register' %}" id="signup" class="form-validate signup">
                            {% csrf_token %}
                                <div class="form-group" style="">
                                    <input
                                        type="text"
                                        name="username"
                                        id="username"
                                        class="form-control validate-username required invalid"
                                        placeholder="Логин">
                                </div>
                                <div class="form-group">
                                    <input
                                        type="password"
                                        name="password1"
                                        id="password1"
                                        class="form-control validate-username required invalid"
                                        placeholder="Придумайте пароль">
                                </div>
                                <div class="form-group">
                                    <input
                                        type="password"
                                        name="password2"
                                        id="password2"
                                        class="form-control validate-username required invalid"
                                        placeholder="Повторите пароль">
                                </div>
                            <div class="form-group">
                                <button id="reg_submit" type="submit" class="btn btn-primary btn-lg btn-block">Регистрация</button>
                            </div>
                    </form>
                    <div id="api-response-reg"></div>

                </div>
            </div>
        </div>
        <div class="modal-footer">
            <div class="forgot login-footer">
                <span style="font-size: 20px;">
                    <span>Нет аккаунта?</span>
                    <a href="javascript: showRegisterForm();">Создать аккаунт</a>
                </span>
            </div>
            <div style="font-size: 20px;" class="forgot register-footer" style="display:none">
                <span>Есть аккаунт?</span>
                <a href="javascript: showLoginForm();">Войти</a>
            </div>
        </div>
    </div>
</div>
</div>

<script>
  function showRegisterForm(){
      $('.loginBox').fadeOut('fast',function(){
          $('.registerBox').fadeIn('fast');
          $('.login-footer').fadeOut('fast',function(){
              $('.register-footer').fadeIn('fast');
          });
          $('.modal-title').html('Register with');
      });
      $('.error').removeClass('alert alert-danger').html('');

  }
  function showLoginForm(){
      $('#loginModal .registerBox').fadeOut('fast',function(){
          $('.loginBox').fadeIn('fast');
          $('.register-footer').fadeOut('fast',function(){
              $('.login-footer').fadeIn('fast');
          });

          $('.modal-title').html('Login with');
      });
       $('.error').removeClass('alert alert-danger').html('');
  }

  function openLoginModal(){
      showLoginForm();
      setTimeout(function(){
          $('#loginModal').modal('show');
      }, 230);

  }
  function openRegisterModal(){
      showRegisterForm();
      setTimeout(function(){
          $('#loginModal').modal('show');
      }, 230);

  }

</script>
